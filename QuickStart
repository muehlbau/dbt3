
OSDL DBT-3 QuickStart
=====================

Requirements
------------

 - PostgreSQL or MySQL
 - sysstat
 - gnuplot 4.0


How to install
--------------

 (1) Run autogen to create a configure script.

       $ sh autogen.sh

 (2) Run configure with several options as you need.

     To configure with MySQL database, you can specify several MySQL
     options:

       $ ./configure --with-mysql --with-mysql-datadir=/tmp/mydata

     To configure with PostgreSQL database, you can also specify
     PostgreSQL options:

       $ ./configure --with-postgresql=/usr/pgsql-9.0

     For more details about configure options, run with --help option:

       $ ./configure --help

 (3) Run make to build dbgen, qgen, and other tools.

       $ make


How to run
----------

 (1) Make sure that `dbt3_profile' has been configured correctly, and
     modify it if needed.

     Check your `dbt3_profile' in `scripts' directory. `DSS_PATH' is
     a directory that holds data files generated by dbgen.

     Other variables need not to be modified by hand.

 (2) Make sure that `pgsql_profile' (or `mysql_profile') have been
     configured correctly, and modify it if needed.

     If you're using PostgreSQL, you have to specify PGHOME and PGDATA
     correctly in `pgsql_profile' in the `scripts/pgsql' directory.

     If you're using MySQL, you have to specify MYDATA correctly in
     `mysql_profile' in the `scripts/mysql' directory.

     Other options need not to be modified by hand.

 (3) Run `gen_data.sh' to generate a data set in flat file format to be
     loaded.

     Running `gen_data.sh' script with specifying a scalefactor parameter
     would generate flat files into `DSS_PATH' directory.

       $ cd scripts
       $ ./gen_data.sh 10
         (generate dataset with scale factor 10)

     After gen_data.sh script, make sure the data files have been generated
     correctly.

       $ ls -l /tmp/dbt3.10
       total 10895544
       -rw-rw-r-- 1 snaga snaga  243386690 Apr 16 00:57 customer.tbl
       -rw-rw-r-- 1 snaga snaga 7715685934 Apr 16 01:01 lineitem.tbl
       -rw-rw-r-- 1 snaga snaga       2078 Apr 16 00:56 nation.tbl
       -rw-rw-r-- 1 snaga snaga 1734296707 Apr 16 01:00 orders.tbl
       -rw-rw-r-- 1 snaga snaga 1196552305 Apr 16 00:57 partsupp.tbl
       -rw-rw-r-- 1 snaga snaga  242067136 Apr 16 00:57 part.tbl
       -rw-rw-r-- 1 snaga snaga        391 Apr 16 00:56 region.tbl
       -rw-rw-r-- 1 snaga snaga   14090274 Apr 16 00:56 supplier.tbl
       $

 (4) Run `dbt3-run-workload' to run test workloads.

     Now, you have been prepared to load data into the database and run
     workloads. Run `dbt3-run-workload' in the `scripts' directory.

       $ ./dbt3-run-workload

     You can determine the progress by refering 'time_statistics' table
     in the test database while running those workloads.

       $ psql -c 'select * from time_statistics' dbt3
        (with PostgreSQL)

 (5) Make sure that the result has been published in the `output'
     directory.

     The result would be generated in `scripts/output/<run number>'
     directory.

     Make sure that `index.html', `q_time.png' and other result
     files have been generated in the directory, and you can see
     the report in HTML format with opening `index.html' with
     your brower.

       $ ls -lF output/1/
       total 40
       -rw-rw-r-- 1 snaga snaga  387 Apr 29 04:37 config.txt
       -rw-rw-r-- 1 snaga snaga 1108 Apr 29 04:39 index.html
       drwxrwxr-x 3 snaga snaga 4096 Apr 28 01:33 load/
       drwxrwxr-x 6 snaga snaga 4096 Apr 29 04:39 power1/
       -rw-rw-r-- 1 snaga snaga  537 Apr 29 04:39 q_time.input
       -rw-rw-r-- 1 snaga snaga 2634 Apr 29 04:38 q_time.out
       -rw-rw-r-- 1 snaga snaga  332 Apr 29 04:39 q_time_p.data
       -rw-rw-r-- 1 snaga snaga 4032 Apr 29 04:39 q_time.png
       -rw-rw-r-- 1 snaga snaga   10 Apr 28 01:33 seed
       drwxrwxr-x 4 snaga snaga 4096 Apr 29 04:39 throughput1/
       $

     DBT-3 consists of three tests, Load Test, Power Test and
     Throughput Test, so there are three subdirectories in
     the result directory by default.


Any questions?
--------------

     Please visit the project page at sourceforge, and ask your
     questions in the forum or the mailing lists:

     Database Test Suite
     http://sourceforge.net/projects/osdldbt/



